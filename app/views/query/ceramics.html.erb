<h3>Artifact Search</h3>

<%= render "artifact_nav" %>

<%= form_tag ceramics_results_path, method: :get do %>
  <div class="row">
    <!-- Ceramics tables and search options -->
    <div class="col-md-8">

      <!-- ceramics query navigation -->
      <ul class="nav nav-tabs buffer-bottom" id="artifacts_ceramics_tab">
        <li class="active">
          <a href="#inventory" data-toggle="tab">
            Inventory <span class="small">(<%= delimit(@total_ci) %>)</span>
          </a>
        </li>
        <li>
          <a href="#claps" data-toggle="tab">
            CLAPs <span class="small">(<%= delimit(@total_cc) %>)</span>
          </a>
        </li>
        <li>
          <a href="#data" data-toggle="tab">
            2005 Data <span class="small">(<%= delimit(@total_cd) %>)</span>
          </a>
        </li>
        <li>
          <a href="#vessels" data-toggle="tab">
            Vessels <span class="small">(<%= delimit(@total_cv) %>)</span>
          </a>
        </li>
      </ul>

      <div class="tab-content">
        <!-- inventory -->
        <div class="tab-pane active" id="inventory">
          <div class="row">
            <!-- Text fields -->
            <div class="col-md-6">
              <% @ci_inputs.each do |column| %>
                <% param_name = "inv_#{column[:name]}" %>
                <div class="form-group">
                  <%= label_tag param_name, column[:name].titleize %>
                  <%= text_field_tag param_name, params[param_name], class: "form-control" %>
                </div>
              <% end %>
            </div>

            <!-- Select fields -->
            <div class="col-md-6">
              <% @ci_selects.each do |column| %>
                <% param_name = "inv_#{column[:name]}" %>
                <div class="form-group">
                  <%= label_tag param_name, column[:name].titleize %>
                  <% if column[:type] == :column %>
                    <%= select_tag param_name, options_for_select(@ci_class.pluck(column[:name]).uniq.sort, params[param_name]), class: "form-control", include_blank: true %>
                  <% else %>
                    <%= select_tag param_name, options_from_collection_for_select(column[:name].classify.constantize.distinct.order(:name), "id", "name", params[param_name]), class: "form-control", include_blank: true %>
                  <% end %>
                </div>
              <% end %>
            </div>
          </div>
          <%= submit_tag "Search Ceramic Inventory", class: "btn btn-primary" %>
        </div>

        <!-- CLAPs -->
        <div class="tab-pane" id="claps">
          <div class="row">
            <!-- Text fields -->
            <div class="col-md-6">
              <% @cc_inputs.each do |column| %>
                <% param_name = "clap_#{column[:name]}" %>
                <div class="form-group">
                  <%= label_tag param_name, column[:name].titleize %>
                  <%= text_field_tag param_name, params[param_name], class: "form-control" %>
                </div>
              <% end %>
            </div>

            <!-- Select fields -->
            <div class="col-md-6">
              <% @cc_selects.each do |column| %>
                <% param_name = "clap_#{column[:name]}" %>
                <div class="form-group">
                  <%= label_tag param_name, column[:name].titleize %>
                  <% if column[:type] == :column %>
                    <%= select_tag param_name, options_for_select(@cc_class.pluck(column[:name]).uniq.sort, params[param_name]), class: "form-control", include_blank: true %>
                  <% else %>
                    <%= select_tag param_name, options_from_collection_for_select(column[:name].classify.constantize.distinct.order(:name), "id", "name", params[param_name]), class: "form-control", include_blank: true %>
                  <% end %>
                </div>
              <% end %>
            </div>
          </div>
          <%= submit_tag "Search Ceramic CLAPs", class: "btn btn-primary" %>
        </div>

        <!-- 2005 Data -->
        <div class="tab-pane" id="data">
          <div class="row">
            <!-- Text fields -->
            <div class="col-md-6">
              <% @cd_inputs.each do |column| %>
                <% param_name = "data_#{column[:name]}" %>
                <div class="form-group">
                  <%= label_tag param_name, column[:name].titleize %>
                  <%= text_field_tag param_name, params[param_name], class: "form-control" %>
                </div>
              <% end %>
            </div>

            <!-- Select fields -->
            <div class="col-md-6">
              <% @cd_selects.each do |column| %>
                <% param_name = "data_#{column[:name]}" %>
                <div class="form-group">
                  <%= label_tag param_name, column[:name].titleize %>
                  <% if column[:type] == :column %>
                    <%= select_tag param_name, options_for_select(@cd_class.pluck(column[:name]).uniq.sort, params[param_name]), class: "form-control", include_blank: true %>
                  <% else %>
                    <%= select_tag param_name, options_from_collection_for_select(column[:name].classify.constantize.distinct.order(:name), "id", "name", params[param_name]), class: "form-control", include_blank: true %>
                  <% end %>
                </div>
              <% end %>
            </div>
          </div>
          <%= submit_tag "Search Ceramics 2005 Data", class: "btn btn-primary" %>
        </div>

        <!-- Vessels -->
        <div class="tab-pane" id="vessels">
          <div class="row">
            <!-- Text fields -->
            <div class="col-md-6">
              <% @cv_inputs.each do |column| %>
                <% param_name = "vessel_#{column[:name]}" %>
                <div class="form-group">
                  <%= label_tag param_name, column[:name].titleize %>
                  <%= text_field_tag param_name, params[param_name], class: "form-control" %>
                </div>
              <% end %>
            </div>

            <!-- Select fields -->
            <div class="col-md-6">
              <% @cv_selects.each do |column| %>
                <% param_name = "vessel_#{column[:name]}" %>
                <div class="form-group">
                  <%= label_tag param_name, column[:name].titleize %>
                  <% if column[:type] == :column %>
                    <%= select_tag param_name, options_for_select(@cv_class.pluck(column[:name]).uniq.sort, params[param_name]), class: "form-control", include_blank: true %>
                  <% else %>
                    <%= select_tag param_name, options_from_collection_for_select(column[:name].classify.constantize.distinct.order(:name), "id", "name", params[param_name]), class: "form-control", include_blank: true %>
                  <% end %>
                </div>
              <% end %>
            </div>
          </div>
          <%= submit_tag "Search Ceramic Vessels", class: "btn btn-primary" %>
        </div>

      </div> <!-- /tab-content -->
    </div> <!-- /col-md-8 -->

    <%= render "artifact_global_opts" %>
  </div>
<% end %>
